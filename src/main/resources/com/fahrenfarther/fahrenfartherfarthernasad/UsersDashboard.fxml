<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.fahrenfarther.fahrenfartherfarthernasad.UsersController"
            style="-fx-background-color: #f5f6fa;">

    <left>
        <VBox style="-fx-background-color: #e8eaf0; -fx-pref-width: 200px;">
            <padding><Insets top="20" right="15" bottom="20" left="15"/></padding>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <VBox.margin><Insets bottom="40"/></VBox.margin>
                <ImageView fitHeight="70" fitWidth="140" preserveRatio="true">
                    <Image url="@FahrenProject.png"/>
                </ImageView>
            </HBox>

            <Label text="Menu" style="-fx-text-fill: #8b8d9a; -fx-font-size: 11px;">
                <VBox.margin><Insets bottom="10"/></VBox.margin>
            </Label>

            <VBox spacing="5">
                <HBox alignment="CENTER_LEFT" spacing="10"
                      style="-fx-padding: 10; -fx-cursor: hand;"
                      onMouseClicked="#handleDashboardClick">
                    <Label text="ðŸ“Š" style="-fx-font-size: 16px;"/>
                    <Label text="Dashboard" style="-fx-font-size: 13px; -fx-text-fill: #6b6d7a;"/>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10"
                      style="-fx-padding: 10; -fx-cursor: hand;"
                      onMouseClicked="#handleCarsClick">
                    <Label text="ðŸš—" style="-fx-font-size: 16px;"/>
                    <Label text="Cars" style="-fx-font-size: 13px; -fx-text-fill: #6b6d7a;"/>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10"
                      style="-fx-background-color: #d4d7e3; -fx-background-radius: 8; -fx-padding: 10;">
                    <Label text="ðŸ‘¥" style="-fx-font-size: 16px;"/>
                    <Label text="Users" style="-fx-font-weight: 600; -fx-font-size: 13px;"/>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10"
                      style="-fx-padding: 10; -fx-cursor: hand;"
                      onMouseClicked="#handleRentalsClick">
                    <Label text="ðŸ“„" style="-fx-font-size: 16px;"/>
                    <Label text="Rentals" style="-fx-font-size: 13px; -fx-text-fill: #6b6d7a;"/>
                </HBox>
            </VBox>
        </VBox>
    </left>

    <center>
        <VBox spacing="20">
            <padding><Insets top="30" right="40" bottom="30" left="40"/></padding>

            <!-- Header with Add User Button -->
            <HBox alignment="CENTER_LEFT">
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="Register Driver" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                    <Label text="Manage your vehicle fleet"
                           style="-fx-text-fill: #8b8d9a; -fx-font-size: 13px;"/>
                </VBox>

                <Button fx:id="btnAddUser" text="+ Add User" onAction="#handleAddUserClick"
                        style="-fx-background-color: #2d5a9d; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-size: 13px; -fx-font-weight: 600; -fx-cursor: hand;">
                    <HBox.margin><Insets left="20"/></HBox.margin>
                </Button>
            </HBox>

            <!-- Add User Form (Initially Hidden) -->
            <VBox fx:id="addUserForm" spacing="15" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25;" managed="false" visible="false">
                <Label text="Add New User" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                <!-- Name and Date of Birth Row -->
                <HBox spacing="15">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Name" style="-fx-font-size: 13px;"/>
                        <TextField fx:id="txtName" promptText="Enter name"
                                   style="-fx-background-color: #f5f6fa; -fx-background-radius: 6; -fx-padding: 10;"/>
                    </VBox>
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Date of Birth" style="-fx-font-size: 13px;"/>
                        <DatePicker fx:id="dpDateOfBirth" promptText="Select date"
                                    style="-fx-background-color: #f5f6fa; -fx-background-radius: 6;"
                                    maxWidth="Infinity"/>
                    </VBox>
                </HBox>

                <!-- Contact No. and License Number Row -->
                <HBox spacing="15">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Contact No." style="-fx-font-size: 13px;"/>
                        <TextField fx:id="txtContactNo" promptText="Enter contact number"
                                   style="-fx-background-color: #f5f6fa; -fx-background-radius: 6; -fx-padding: 10;"/>
                    </VBox>
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="License Number" style="-fx-font-size: 13px;"/>
                        <TextField fx:id="txtLicenseNumber" promptText="Enter license number"
                                   style="-fx-background-color: #f5f6fa; -fx-background-radius: 6; -fx-padding: 10;"/>
                    </VBox>
                </HBox>

                <!-- Buttons -->
                <HBox spacing="10">
                    <Button text="Save" onAction="#handleSaveUserClick"
                            style="-fx-background-color: #2d5a9d; -fx-text-fill: white; -fx-background-radius: 6; -fx-padding: 8 20; -fx-font-size: 13px; -fx-cursor: hand;"/>
                    <Button text="Cancel" onAction="#handleCancelClick"
                            style="-fx-background-color: #e8eaf0; -fx-text-fill: #333; -fx-background-radius: 6; -fx-padding: 8 20; -fx-font-size: 13px; -fx-cursor: hand;"/>
                </HBox>
            </VBox>

            <!-- Users Table -->
            <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20;" VBox.vgrow="ALWAYS">
                <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="nameColumn" text="Name" prefWidth="200">
                            <cellValueFactory>
                                <javafx.scene.control.cell.PropertyValueFactory property="name" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="dateOfBirthColumn" text="Date of Birth" prefWidth="130">
                            <cellValueFactory>
                                <javafx.scene.control.cell.PropertyValueFactory property="dateOfBirth" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="contactNoColumn" text="Contact No." prefWidth="130">
                            <cellValueFactory>
                                <javafx.scene.control.cell.PropertyValueFactory property="contactNo" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="licenseNoColumn" text="License No." prefWidth="180">
                            <cellValueFactory>
                                <javafx.scene.control.cell.PropertyValueFactory property="licenseNo" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="120" />
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>

</BorderPane>
